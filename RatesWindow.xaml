<Window x:Class="OsuTag.RatesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Difficulties"
        Width="500" Height="450"
        Background="#0a0e27"
        Foreground="#ffffff"
        WindowStartupLocation="CenterOwner"
        ShowInTaskbar="False"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <Style x:Key="DifficultyItem" TargetType="Border">
            <Setter Property="Background" Value="#0f1428"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1" CenterX="0.5" CenterY="0.5"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" 
                                                 To="1.02" Duration="0:0:0.2">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" 
                                                 To="1.02" Duration="0:0:0.2">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" 
                                                 To="1" Duration="0:0:0.2">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                                <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" 
                                                 To="1" Duration="0:0:0.2">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <DataTrigger Binding="{Binding IsSelected}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" 
                                                To="#1a4d2e" Duration="0:0:0.3">
                                    <ColorAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </ColorAnimation.EasingFunction>
                                </ColorAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" 
                                                To="#0f1428" Duration="0:0:0.3">
                                    <ColorAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </ColorAnimation.EasingFunction>
                                </ColorAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#00d4ff" Padding="20,0" VerticalAlignment="Center">
            <TextBlock Text="Select Difficulties by Rate" FontSize="16" FontWeight="Bold" Foreground="#0a0e27" VerticalAlignment="Center"/>
        </Border>

        <!-- Difficulties List -->
        <Border Grid.Row="1" Background="#0a0e27" Padding="20,20,20,20">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <ItemsControl x:Name="DifficultiesItemsControl" ItemsSource="{Binding Difficulties}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Style="{StaticResource DifficultyItem}" 
                                    MouseLeftButtonDown="Difficulty_Click"
                                    Tag="{Binding}">
                                <Border.Background>
                                    <SolidColorBrush Color="#0f1428"/>
                                </Border.Background>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                        <TextBlock Text="{Binding DifficultyName}" FontSize="13" FontWeight="Bold" Foreground="#ffffff"/>
                                        <TextBlock Text="{Binding Difficulty.Rate, StringFormat='Rate: {0}'}" FontSize="11" Foreground="#00d4ff" Margin="0,4,0,0"/>
                                    </StackPanel>

                                    <!-- Selection Indicator -->
                                    <Border Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                                        <TextBlock Text="âœ“" FontSize="18" Foreground="#1a4d2e" FontWeight="Bold"
                                                   Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    </Border>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Footer -->
        <Border Grid.Row="2" Background="#1a1f3a" Padding="20,0">
            <StackPanel VerticalAlignment="Center" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="CloseButton" Content="Done" Click="Close_Click" 
                        Background="#00d4ff" Foreground="#0a0e27" FontWeight="Bold" FontSize="12"
                        Padding="20,10" Margin="0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
